flowchart TD

  %% === DESARROLLO LOCAL ===
  subgraph Desarrollo_Local [ðŸ’» Localhost PC Desarrollador]
    VSCode[ðŸ“ VS Code + Terminal]
    SourceCode[ðŸ“ CÃ³digo Fuente SuperMarketApp]
    authCtrl[ðŸ” authController.js]
    productosCtrl[ðŸ›’ productosController.js]
    carritoCtrl[ðŸ›ï¸ carritoController.js]
    adminHTML[ðŸ§° adminPanel.html]
    registroJS[ðŸ“„ registro.js]
    devServer[ðŸ–¥ï¸ Servidor Node.js (desarrollo)]
    mysqlLocal[ðŸ—„ï¸ MySQL Local (puerto 3306)]

    VSCode --> SourceCode
    SourceCode --> authCtrl
    SourceCode --> productosCtrl
    SourceCode --> carritoCtrl
    SourceCode --> adminHTML
    SourceCode --> registroJS
    SourceCode --> devServer
    devServer --> mysqlLocal
  end

  %% === CLIENTE/NAVEGADOR ===
  subgraph Cliente [ðŸŒ Navegador del Cliente]
    frontend[ðŸŽ¨ Frontend SuperMarketApp]
    indexHTML[ðŸ“„ index.html]
    productoHTML[ðŸ“„ producto.html]
    carritoHTML[ðŸ“„ carrito.html]
    registroHTML[ðŸ“„ registro.html]
    jsCarrito[ðŸ“œ addToCart.js]
    ajax[ðŸ” AJAX / API Requests]

    frontend --> indexHTML
    frontend --> productoHTML
    frontend --> carritoHTML
    frontend --> registroHTML
    frontend --> jsCarrito
    jsCarrito --> ajax
  end

  %% === SERVIDOR PRODUCCIÃ“N ===
  subgraph Produccion [ðŸ–¥ï¸ VPS ProducciÃ³n]
    nginx[ðŸŒ NGINX Reverse Proxy]
    pm2[ðŸ” PM2 (Gestor de procesos)]
    nodeServer[ðŸš€ Node.js App (ProducciÃ³n)]
    express[ðŸ§  Express.js App]
    jwt[ðŸ” JWT Middleware]
    routers[ðŸ“¦ MVC Routers (Auth, Productos, Carrito)]
    logger[ðŸ“‹ Logger & Sanitizer]
    mysqlRemoto[ðŸ—„ï¸ MySQL/MariaDB Remoto]
    apiEnvios[ðŸ“¦ API de EnvÃ­os]
    apiPagos[ðŸ’³ API de Pagos]
    fs[ðŸ“ Sistema de Archivos]
    uploads[ðŸ“¤ /uploads]
    logs[ðŸ—‚ï¸ /logs]

    nginx --> nodeServer
    pm2 --> nodeServer
    nodeServer --> express
    nodeServer --> jwt
    nodeServer --> routers
    nodeServer --> logger
    nodeServer --> mysqlRemoto
    nodeServer --> apiEnvios
    nodeServer --> apiPagos
    nodeServer --> fs
    fs --> uploads
    fs --> logs
  end

  %% === CONEXIONES ENTRE CLIENTE Y PRODUCCIÃ“N ===
  ajax -->|HTTPS| nginx
  nodeServer -->|SQL 3306| mysqlRemoto
  nodeServer -->|HTTPS| apiEnvios
  nodeServer -->|HTTPS| apiPagos
